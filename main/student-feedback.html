<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">
    <title>Student Feedback</title>
    <link rel="stylesheet" href="css/student-feedback.css">

</head>
<body>

    <div>
        <div class="container">
            <div class="card">
                
                <div id="feedback-content">
                    <div class="card-header">
                        <svg class="icon-xl" viewBox="0 0 24 24">
                            <path d="M12 14l9-5-9-5-9 5 9 5z" fill="currentColor"></path>
                            <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" fill="currentColor" opacity="0.5"></path>
                        </svg>
                        <h2 class="card-title">Week 2: Control Structures</h2>
                        <p class="card-description">Introduction to Computer Science (CS101)</p>
                    </div>

                    <div class="card-content">

                        <form id="feedback-form" onsubmit="submitFeedback(event)">
                            <div class="form-group">
                                <label class="form-label">username (Optional)</label>
                                <input type="text" class="input" placeholder="choose yourself a username to review your submitions later">
                            </div>

                            <div class="form-group">
                                <label class="form-label">1. How clear was the lecture?</label>
                                <div class="star-rating" id="starRating">
                                    <svg class="star" data-rating="1" viewBox="0 0 24 24" fill="#cbd5e0"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                    <svg class="star" data-rating="2" viewBox="0 0 24 24" fill="#cbd5e0"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                    <svg class="star" data-rating="3" viewBox="0 0 24 24" fill="#cbd5e0"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                    <svg class="star" data-rating="4" viewBox="0 0 24 24" fill="#cbd5e0"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                    <svg class="star" data-rating="5" viewBox="0 0 24 24" fill="#cbd5e0"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                </div>
                                <p id="ratingDisplay" style="margin-top: 0.5rem; color: var(--muted-foreground); font-size: 0.875rem;">Your rating: Not selected</p>
                            </div>

                            <div class="form-group">
                                <label class="form-label">2. What worked well in this session?</label>
                                <textarea id="feedbackText" class="textarea" rows="3" placeholder="Share your thoughts... (Example: The examples were really helpful and the pace was just right.)"></textarea>
                            </div>

                            <button type="submit" class="btn btn-primary w-full">Submit Feedback</button>
                        </form>

                    </div>
                </div> 

            </div>
        </div>
    </div>

    <script>
        let selectedRating = 0;
        const stars = document.querySelectorAll('.star');
        const ratingDisplay = document.getElementById('ratingDisplay');
        const feedbackText = document.getElementById('feedbackText');
        
        stars.forEach(star => {
            star.addEventListener('click', function() {
                selectedRating = parseInt(this.dataset.rating);
                updateStarDisplay(selectedRating);
                ratingDisplay.textContent = `Your rating: ${selectedRating}`;
            });
            
            star.addEventListener('mouseenter', function() {
                const hoverRating = parseInt(this.dataset.rating);
                updateStarDisplay(hoverRating);
            });
        });
        
        document.getElementById('starRating').addEventListener('mouseleave', function() {
            updateStarDisplay(selectedRating);
        });
        
        function updateStarDisplay(rating) {
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.setAttribute('fill', '#ecc94b'); 
                } else {
                    star.setAttribute('fill', '#cbd5e0'); 
                }
            });
        }
        
        function submitFeedback(event) {
            event.preventDefault(); 
            
            const rating = selectedRating || 3; 
            const text = feedbackText.value || 'The lecture was helpful and I learned a lot.';
            
            const container = document.getElementById('feedback-content');
            
            container.innerHTML = `
                <div class="card-content">
                    <div class="submit-icon">
                        <svg width="35" height="35" viewBox="0 0 24 24" fill="none" stroke="#48bb78" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                    </div>
                    <h2 class="card-title" style="margin-bottom: 0.5rem;">Thank You!</h2>
                    <p class="card-description" style="margin-bottom: 1rem;">Your feedback has been submitted.</p>
                    
                    <div style="background: var(--secondary); padding: 1rem; border-radius: 0.375rem; margin-bottom: 1.5rem; border-left: 4px solid var(--primary);">
                        <p style="font-weight: 600; margin-bottom: 0.5rem; font-size: 0.875rem;">Your submitted feedback:</p>
                        <p style="margin-bottom: 0.5rem; font-size: 0.875rem;"><strong>Rating:</strong> ${rating}/5 stars</p>
                        <p style="font-size: 0.875rem;"><strong>Comments:</strong> ${text}</p>
                    </div>
                    
                    <a href="student-dashboard.html" class="btn btn-primary w-full">
                        Go to Dashboard
                    </a>
                </div>
            `;
        }
    </script>
</body>
</html>